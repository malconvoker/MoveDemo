{
	"name": "Functions",
	"events": [
		{
			"functionName": "GetTouchAngle",
			"functionDescription": "Returns the angle to Touch from PlayerBase rounded to 45degrees",
			"functionCategory": "",
			"functionReturnType": "number",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [
				{
					"type": "comment",
					"text": "Returns the angle to Touch from PlayerBase rounded to 45°"
				}
			],
			"sid": 459252184913107,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-between-values",
							"objectClass": "System",
							"sid": 122181089482186,
							"parameters": {
								"value": "CursorTest.X",
								"lower-bound": "PlayerBase.X-Tile",
								"upper-bound": "PlayerBase.X+Tile"
							}
						},
						{
							"id": "is-between-values",
							"objectClass": "System",
							"sid": 594718720571726,
							"parameters": {
								"value": "CursorTest.Y",
								"lower-bound": "PlayerBase.Y-Tile",
								"upper-bound": "PlayerBase.Y+Tile"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "If touching adjacent square, set touch angle to that square"
						},
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 899165334211769,
							"parameters": {
								"value": "Functions.GetAngleIndex(\nPlayerBase.X,\nPlayerBase.Y,\nCursorTest.X,\nCursorTest.Y)"
							}
						}
					],
					"sid": 778823282456708
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 299665763410281
						}
					],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 120712298099060,
							"parameters": {
								"value": "Functions.GetAngleIndex(\nPlayerBase.ImagePointX(\"center\"),\nPlayerBase.ImagePointY(\"center\"),\nTouch.X,\nTouch.Y)"
							}
						}
					],
					"sid": 517305976857551
				}
			]
		},
		{
			"functionName": "GetAngleIndex",
			"functionDescription": "Returns the angle between two points rounded to 45 degrees",
			"functionCategory": "",
			"functionReturnType": "number",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "X1",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 803071057674620
				},
				{
					"name": "Y1",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 678216176183357
				},
				{
					"name": "X2",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 550854862829469
				},
				{
					"name": "Y2",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 475292237771463
				}
			],
			"eventType": "function-block",
			"conditions": [],
			"actions": [
				{
					"type": "comment",
					"text": "Returns the angle between two points rounded to 45°, positive"
				},
				{
					"type": "comment",
					"text": "(angle+360)%360 turns -180°‒180° angles to 0°‒360°, 45*round(angle/45) rounds to nearest 45°"
				},
				{
					"id": "set-function-return-value",
					"objectClass": "Functions",
					"sid": 618358712827123,
					"parameters": {
						"value": "45*round(((angle(X1, Y1, X2, Y2)+360)%360)/45)"
					}
				}
			],
			"sid": 829921313759217
		},
		{
			"functionName": "SetMoveTile",
			"functionDescription": "Sets the MoveTile object to the tile the PlayerBase moves to on touch release",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [
				{
					"id": "set-position",
					"objectClass": "MoveTile",
					"sid": 429092487363977,
					"parameters": {
						"x": "PlayerBase.X",
						"y": "PlayerBase.Y"
					}
				},
				{
					"id": "set-animation-frame",
					"objectClass": "MoveTile",
					"sid": 857367369166171,
					"parameters": {
						"frame-number": "Functions.GetTouchAngle/45"
					}
				}
			],
			"sid": 373425752336578,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-visible",
							"objectClass": "MoveTile",
							"sid": 546616034432794
						},
						{
							"id": "is-on-screen",
							"objectClass": "MoveTile",
							"sid": 786628101451795
						}
					],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "TXTmovetiledata",
							"sid": 790284066409212,
							"parameters": {
								"text": "\"MoveTile \" & MoveTile.AnimationFrame"
							}
						}
					],
					"sid": 852701339940361
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 869572658710052
						}
					],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "TXTmovetiledata",
							"sid": 288508121414349,
							"parameters": {
								"text": "\"MoveTile Off\""
							}
						}
					],
					"sid": 353669027095734
				}
			]
		},
		{
			"functionName": "CursorDistance",
			"functionDescription": "Returns the distance in tiles between PlayerBase and Cursor",
			"functionCategory": "",
			"functionReturnType": "number",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [
				{
					"type": "comment",
					"text": "Same as TileDistance, but for Cursor and Player"
				},
				{
					"id": "set-text",
					"objectClass": "TXTcursordistance",
					"sid": 895551077578967,
					"parameters": {
						"text": "\"CursorDist \" &\nabs((CursorTest.X-PlayerBase.X)/Tile) & \", \" &\nabs((CursorTest.Y-PlayerBase.Y)/Tile) & \": \" &\nmax(abs((CursorTest.X-PlayerBase.X)/Tile), abs((CursorTest.Y-PlayerBase.Y)/Tile))"
					}
				},
				{
					"id": "set-function-return-value",
					"objectClass": "Functions",
					"sid": 728801597057744,
					"parameters": {
						"value": "max(abs((CursorTest.X-PlayerBase.X)/Tile), abs((CursorTest.Y-PlayerBase.Y)/Tile))"
					}
				},
				{
					"id": "set-function-return-value",
					"objectClass": "Functions",
					"sid": 262708574632637,
					"disabled": true,
					"parameters": {
						"value": "Functions.TileDistance(CursorTest.X,CursorTest.Y, PlayerBase.X,PlayerBase.Y)"
					}
				}
			],
			"sid": 340353274459746
		},
		{
			"functionName": "TileDistance",
			"functionDescription": "Returns the distance in tiles between two points",
			"functionCategory": "",
			"functionReturnType": "number",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "X1",
					"type": "number",
					"initialValue": "0",
					"comment": "X of first point",
					"sid": 948918938094500
				},
				{
					"name": "Y1",
					"type": "number",
					"initialValue": "0",
					"comment": "Y of first point",
					"sid": 349679389719040
				},
				{
					"name": "X2",
					"type": "number",
					"initialValue": "0",
					"comment": "X of second point",
					"sid": 562325942979530
				},
				{
					"name": "Y2",
					"type": "number",
					"initialValue": "0",
					"comment": "Y of second point",
					"sid": 718424904250236
				}
			],
			"eventType": "function-block",
			"conditions": [],
			"actions": [
				{
					"id": "set-text",
					"objectClass": "TXTmovedistance",
					"sid": 398277617406924,
					"disabled": true,
					"parameters": {
						"text": "abs((CursorTest.X-PlayerBase.X)/Tile) & \", \" & abs((CursorTest.Y-PlayerBase.Y)/Tile) & \": \" & max(abs((CursorTest.X-PlayerBase.X)/Tile), abs((CursorTest.Y-PlayerBase.Y)/Tile))"
					}
				},
				{
					"id": "set-function-return-value",
					"objectClass": "Functions",
					"sid": 866618493859531,
					"parameters": {
						"value": "max(abs(floor((X1-X2)/Tile)), abs(floor((Y1-Y2)/Tile)))"
					}
				}
			],
			"sid": 692891348368683
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Debug",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "DisplayEnemyData",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "TXTturn",
							"sid": 344780085134859,
							"parameters": {
								"text": "EnemiesActive & \"; Turn \" & Turn"
							}
						},
						{
							"id": "destroy",
							"objectClass": "TXTenemydata",
							"sid": 665214081377240
						}
					],
					"sid": 987065775808259,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each-ordered",
									"objectClass": "System",
									"sid": 881732681537504,
									"parameters": {
										"object": "EnemyBases",
										"expression": "EnemyBases.UID",
										"order": "ascending"
									}
								}
							],
							"actions": [
								{
									"id": "spawn-another-object",
									"objectClass": "EnemyBases",
									"sid": 821604617139240,
									"parameters": {
										"object": "TXTenemydata",
										"layer": "0",
										"image-point": "0"
									}
								},
								{
									"id": "set-text",
									"objectClass": "TXTenemydata",
									"sid": 733767473029818,
									"parameters": {
										"text": "EnemyBases.hp & \"/\" & EnemyBases.maxhp & \" \" & EnemyBases.ActTime & \"/\" & EnemyBases.ActThreshold & \" \" & EnemyBases.TurnOrder"
									}
								},
								{
									"id": "append-text",
									"objectClass": "TXTturn",
									"sid": 411931046834882,
									"parameters": {
										"text": "\"*\""
									}
								}
							],
							"sid": 402372514458566,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "EnemyBases",
											"sid": 245644819097363,
											"parameters": {
												"instance-variable": "TurnOrder",
												"comparison": 0,
												"value": "EnemiesActive"
											}
										}
									],
									"actions": [
										{
											"id": "append-text",
											"objectClass": "TXTenemydata",
											"sid": 306765284596397,
											"parameters": {
												"text": "\"*\""
											}
										}
									],
									"sid": 449339832456438
								}
							]
						}
					]
				}
			],
			"sid": 107274233799421
		}
	],
	"sid": 159065806374315
}